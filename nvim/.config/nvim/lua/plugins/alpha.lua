-- lua/plugins/alpha-splash.lua
return {
  {
    "goolord/alpha-nvim",
    optional = true, -- only active when LazyVim's alpha extra is enabled
    opts = function()
      local dashboard = require("alpha.themes.dashboard")
      
      -- Create an empty header to make space for our ANSI art
      dashboard.section.header.val = {}
      
      -- Keep the standard LazyVim menu buttons
      dashboard.section.buttons.val = {
        dashboard.button("f", " " .. " Find file", "<cmd> lua LazyVim.pick()() <cr>"),
        dashboard.button("n", " " .. " New file", [[<cmd> ene <BAR> startinsert <cr>]]),
        dashboard.button("r", " " .. " Recent files", [[<cmd> lua LazyVim.pick("oldfiles")() <cr>]]),
        dashboard.button("g", " " .. " Find text", [[<cmd> lua LazyVim.pick("live_grep")() <cr>]]),
        dashboard.button("p", " " .. " Projects", [[<cmd> lua LazyVim.pick("projects")() <cr>]]),
        dashboard.button("c", " " .. " Config", "<cmd> lua LazyVim.pick.config_files()() <cr>"),
        dashboard.button("s", " " .. " Restore Session", [[<cmd> lua require("persistence").load() <cr>]]),
        dashboard.button("x", " " .. " Lazy Extras", "<cmd> LazyExtras <cr>"),
        dashboard.button("l", "󰒲 " .. " Lazy", "<cmd> Lazy <cr>"),
        dashboard.button("q", " " .. " Quit", "<cmd> qa <cr>"),
      }

      -- Set button styling
      for _, button in ipairs(dashboard.section.buttons.val) do
        button.opts.hl = "AlphaButtons"
        button.opts.hl_shortcut = "AlphaShortcut"
      end

      dashboard.section.header.opts.hl = "AlphaHeader"
      dashboard.section.buttons.opts.hl = "AlphaButtons"
      dashboard.section.footer.opts.hl = "AlphaFooter"
      
      -- Adjust layout spacing to accommodate ANSI art
      dashboard.opts.layout[1].val = 26  -- Space for ANSI art

      return dashboard
    end,
    config = function(_, dashboard)
      -- Your ANSI art with visible \27[...] sequences:
      local RAW = [[
    \27[49m                                              \27[m
    \27[49m                       \27[38;2;57;28;42;49m▄\27[38;2;131;78;85;49m▄\27[38;2;156;95;95;49m▄\27[38;2;140;84;87;49m▄\27[38;2;145;89;92;49m▄\27[38;2;136;79;85;49m▄\27[49m                 \27[m
    \27[49m                   \27[38;2;142;87;89;49m▄\27[38;2;244;150;155;48;2;102;64;64m▄\27[38;2;246;152;157;48;2;141;87;90m▄\27[38;2;246;152;157;48;2;172;107;110m▄\27[38;2;245;148;153;48;2;241;149;154m▄\27[38;2;244;138;144;48;2;246;151;156m▄\27[38;2;244;141;146;48;2;246;151;156m▄\27[38;2;245;150;155;48;2;246;152;157m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[38;2;244;139;144;48;2;245;149;154m▄\27[38;2;243;122;128;48;2;215;121;125m▄\27[38;2;243;121;127;48;2;151;80;83m▄\27[38;2;238;130;136;48;2;128;64;64m▄\27[38;2;147;90;92;49m▄\27[49m             \27[m
    \27[49m                \27[38;2;105;63;67;49m▄\27[38;2;243;150;155;48;2;96;57;57m▄\27[38;2;246;152;157;48;2;207;128;132m▄\27[48;2;246;152;157m \27[38;2;246;151;156;48;2;246;152;157m▄\27[48;2;246;152;157m \27[48;2;246;150;155m \27[38;2;243;127;133;48;2;244;130;136m▄\27[48;2;243;120;126m \27[38;2;243;119;125;48;2;243;120;126m▄\27[38;2;244;139;144;48;2;244;141;146m▄\27[48;2;246;151;156m \27[38;2;245;148;153;48;2;244;138;144m▄\27[38;2;244;137;143;48;2;243;122;129m▄\27[38;2;244;137;143;48;2;243;120;127m▄\27[38;2;245;148;153;48;2;244;135;141m▄\27[48;2;246;151;156m \27[38;2;244;138;144;48;2;214;132;137m▄\27[38;2;221;117;122;48;2;85;53;53m▄\27[38;2;66;38;38;49m▄\27[49m          \27[m
    \27[49m    \27[38;2;51;17;17;49m▄\27[49m          \27[38;2;178;109;113;48;2;80;44;44m▄\27[38;2;246;152;157;48;2;236;146;150m▄\27[48;2;246;152;157m \27[38;2;245;149;154;48;2;246;151;156m▄\27[38;2;243;124;130;48;2;244;142;148m▄\27[38;2;243;118;125;48;2;243;125;132m▄\27[38;2;243;121;127;48;2;244;138;144m▄\27[48;2;246;151;156m \27[38;2;246;151;156;48;2;244;142;147m▄\27[38;2;245;149;154;48;2;243;128;134m▄\27[38;2;245;150;155;48;2;243;131;137m▄\27[38;2;246;150;155;48;2;245;148;153m▄\27[38;2;245;145;151;48;2;246;152;157m▄\27[38;2;245;148;153;48;2;246;151;156m▄\27[38;2;246;151;156;48;2;245;151;156m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;246;152;157;48;2;246;151;156m▄\27[38;2;245;150;155;48;2;245;147;152m▄\27[38;2;243;131;137;48;2;243;124;130m▄\27[38;2;243;123;129;48;2;243;120;126m▄\27[38;2;243;133;138;48;2;227;118;124m▄\27[38;2;200;123;126;49m▄\27[49m         \27[m
    \27[49m   \27[38;2;159;98;102;48;2;149;90;95m▄\27[38;2;246;152;157;48;2;233;144;149m▄\27[38;2;246;152;157;48;2;231;142;147m▄\27[38;2;245;151;156;48;2;214;131;136m▄\27[38;2;183;113;116;49m▄\27[49m      \27[38;2;198;122;126;48;2;116;69;72m▄\27[38;2;246;149;154;48;2;244;151;156m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[48;2;246;152;157m \27[38;2;246;151;156;48;2;245;150;155m▄\27[38;2;245;149;154;48;2;243;131;137m▄\27[38;2;245;146;152;48;2;243;120;126m▄\27[38;2;245;151;156;48;2;243;131;137m▄\27[38;2;246;152;157;48;2;246;151;156m▄\27[48;2;246;152;157m  \27[38;2;245;148;153;48;2;246;150;155m▄\27[38;2;243;125;131;48;2;243;133;139m▄\27[38;2;243;119;125;48;2;243;121;128m▄\27[38;2;243;120;126;48;2;243;125;132m▄\27[38;2;245;142;147;48;2;245;147;152m▄\27[48;2;246;152;157m  \27[38;2;246;152;157;48;2;246;151;156m▄\27[38;2;246;151;156;48;2;245;149;154m▄\27[38;2;246;149;154;48;2;244;144;150m▄\27[38;2;246;151;156;48;2;245;148;153m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;216;133;137;48;2;85;50;53m▄\27[49m        \27[m
    \27[49m   \27[49;38;2;130;81;87m▀\27[38;2;162;98;103;48;2;243;150;155m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[38;2;244;138;143;48;2;245;150;155m▄\27[38;2;243;118;125;48;2;244;139;145m▄\27[38;2;149;74;78;48;2;134;67;67m▄\27[49m    \27[38;2;101;54;60;49m▄\27[38;2;243;124;131;48;2;213;119;124m▄\27[38;2;243;118;125;48;2;243;126;132m▄\27[38;2;243;122;128;48;2;244;135;141m▄\27[38;2;245;148;153;48;2;246;151;156m▄\27[48;2;246;152;157m       \27[38;2;246;151;156;48;2;245;149;154m▄\27[38;2;245;149;154;48;2;243;133;138m▄\27[38;2;245;145;150;48;2;243;122;129m▄\27[38;2;245;148;153;48;2;243;128;134m▄\27[38;2;246;151;156;48;2;245;147;152m▄\27[48;2;246;152;157m  \27[38;2;245;145;150;48;2;245;150;155m▄\27[38;2;243;123;129;48;2;244;136;142m▄\27[38;2;243;120;126;48;2;243;128;134m▄\27[38;2;243;126;132;48;2;244;139;145m▄\27[38;2;246;150;155;48;2;246;152;157m▄\27[48;2;246;152;157m \27[38;2;122;74;77;48;2;116;70;70m▄\27[49m       \27[m
    \27[49m    \27[49;38;2;123;79;79m▀\27[38;2;240;148;152;48;2;246;151;156m▄\27[38;2;245;149;154;48;2;244;137;143m▄\27[38;2;243;134;140;48;2;243;118;125m▄\27[38;2;243;136;142;48;2;221;110;116m▄\27[38;2;85;42;42;49m▄\27[49m   \27[38;2;99;58;61;48;2;97;58;58m▄\27[38;2;245;146;152;48;2;243;129;135m▄\27[38;2;244;140;145;48;2;243;120;127m▄\27[38;2;245;147;152;48;2;243;129;135m▄\27[38;2;246;152;157;48;2;245;149;154m▄\27[38;2;245;151;156;48;2;246;152;157m▄\27[38;2;197;178;178;48;2;236;149;153m▄\27[38;2;200;249;240;48;2;234;197;199m▄\27[38;2;213;255;246;48;2;232;196;198m▄\27[38;2;188;165;167;48;2;244;151;156m▄\27[48;2;246;152;157m    \27[38;2;241;149;154;48;2;246;152;157m▄\27[38;2;240;149;153;48;2;246;152;157m▄\27[48;2;246;152;157m   \27[38;2;246;151;156;48;2;245;147;152m▄\27[38;2;245;147;152;48;2;243;129;135m▄\27[38;2;245;146;151;48;2;243;123;129m▄\27[38;2;246;151;156;48;2;243;135;141m▄\27[38;2;246;152;157;48;2;246;151;156m▄\27[48;2;246;152;157m \27[38;2;150;92;96;48;2;139;86;88m▄\27[49m       \27[m
    \27[49m    \27[38;2;131;85;85;48;2;90;45;60m▄\27[38;2;246;152;157;48;2;244;151;156m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;246;151;156m▄▄\27[38;2;179;104;113;48;2;122;67;78m▄\27[49m   \27[38;2;70;46;46;48;2;102;59;64m▄\27[38;2;239;147;152;48;2;246;152;157m▄\27[48;2;246;152;157m   \27[38;2;244;151;156;48;2;243;151;156m▄\27[38;2;187;192;189;48;2;191;234;226m▄\27[38;2;74;45;48;48;2;105;105;105m▄\27[38;2;79;80;77;48;2;59;97;90m▄\27[38;2;202;188;189;48;2;254;252;252m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[48;2;246;152;157m \27[38;2;245;152;157;48;2;246;152;157m▄\27[38;2;196;231;223;48;2;229;162;166m▄\27[38;2;121;189;175;48;2;231;229;229m▄\27[38;2;171;230;218;48;2;235;234;234m▄\27[38;2;220;185;187;48;2;231;158;162m▄\27[48;2;246;152;157m    \27[38;2;245;151;156;48;2;246;152;157m▄\27[38;2;245;149;154;48;2;246;152;157m▄\27[38;2;245;150;155;48;2;246;152;157m▄\27[48;2;246;152;157m \27[38;2;130;77;82;48;2;141;86;89m▄\27[49m       \27[m
    \27[49m    \27[38;2;151;93;93;48;2;159;96;100m▄\27[38;2;245;145;150;48;2;246;151;156m▄\27[38;2;244;137;142;48;2;246;151;156m▄\27[38;2;244;144;150;48;2;246;151;156m▄\27[38;2;245;151;156;48;2;246;152;157m▄\27[38;2;211;130;134;48;2;121;75;78m▄\27[49m    \27[38;2;196;120;124;48;2;192;118;122m▄\27[48;2;246;152;157m \27[38;2;245;150;155;48;2;246;152;157m▄\27[38;2;243;128;134;48;2;245;148;153m▄\27[38;2;243;118;124;48;2;244;139;145m▄\27[38;2;243;119;125;48;2;244;142;147m▄\27[38;2;244;144;150;48;2;246;151;156m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;243;150;154m▄\27[48;2;246;152;157m  \27[38;2;246;152;157;48;2;220;136;140m▄\27[38;2;246;152;157;48;2;130;170;162m▄\27[38;2;171;119;121;48;2;4;3;3m▄\27[38;2;202;224;219;48;2;87;144;133m▄\27[38;2;220;143;146;48;2;225;188;189m▄\27[48;2;246;152;157m   \27[38;2;245;147;152;48;2;245;151;156m▄\27[38;2;243;124;130;48;2;244;140;145m▄\27[38;2;243;118;125;48;2;243;125;131m▄\27[38;2;243;119;126;48;2;243;131;137m▄\27[38;2;223;134;138;48;2;246;150;155m▄\27[49;38;2;110;68;68m▀\27[49m       \27[m
    \27[49m    \27[38;2;102;51;51;48;2;159;85;91m▄\27[38;2;241;120;127;48;2;243;125;131m▄\27[48;2;243;119;125m \27[38;2;243;121;128;48;2;243;125;131m▄\27[38;2;244;148;153;48;2;245;149;154m▄\27[48;2;246;152;157m \27[38;2;224;137;141;48;2;161;98;102m▄\27[38;2;71;42;42;49m▄\27[49m  \27[49;38;2;94;54;60m▀\27[38;2;175;107;111;48;2;242;149;154m▄\27[38;2;245;151;156;48;2;245;149;154m▄\27[38;2;244;139;144;48;2;243;123;129m▄\27[38;2;243;123;129;48;2;243;118;124m▄\27[38;2;236;126;132;48;2;243;118;124m▄\27[38;2;246;150;155;48;2;244;142;147m▄\27[48;2;246;152;157m     \27[38;2;245;150;155;48;2;246;152;157m▄\27[38;2;243;129;134;48;2;245;150;155m▄\27[38;2;243;121;128;48;2;245;149;154m▄\27[38;2;244;139;144;48;2;245;151;156m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[48;2;246;152;157m  \27[38;2;246;150;155;48;2;245;147;152m▄\27[38;2;244;142;147;48;2;243;125;131m▄\27[38;2;243;136;142;48;2;243;119;126m▄\27[38;2;123;71;73;48;2;242;123;130m▄\27[49;38;2;82;43;47m▀\27[49m        \27[m
    \27[49m     \27[38;2;137;78;83;48;2;157;83;86m▄\27[38;2;244;145;151;48;2;243;123;130m▄\27[38;2;245;148;153;48;2;244;131;137m▄\27[38;2;245;151;156;48;2;245;149;154m▄\27[38;2;246;150;155;48;2;246;151;156m▄\27[38;2;244;129;135;48;2;244;136;142m▄\27[38;2;243;119;125;48;2;179;90;95m▄\27[38;2;214;104;111;49m▄\27[38;2;47;27;27;49m▄\27[49m \27[38;2;183;87;93;48;2;214;110;116m▄\27[38;2;243;130;136;48;2;244;142;148m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[38;2;246;152;157;48;2;241;148;153m▄\27[38;2;220;136;141;48;2;180;111;115m▄\27[38;2;58;55;55;48;2;245;152;157m▄\27[38;2;81;58;59;48;2;246;152;157m▄\27[48;2;246;152;157m    \27[38;2;172;104;108;48;2;245;145;150m▄\27[38;2;243;125;131;48;2;243;119;126m▄\27[38;2;243;119;125;48;2;243;118;124m▄\27[38;2;244;135;141;48;2;243;126;132m▄\27[38;2;246;151;156;48;2;246;150;155m▄\27[48;2;246;152;157m  \27[38;2;207;128;132;48;2;246;152;157m▄\27[38;2;122;71;71;48;2;245;151;156m▄\27[49;38;2;90;55;58m▀\27[49m   \27[38;2;49;33;33;49m▄\27[38;2;197;121;125;49m▄\27[38;2;126;77;79;49m▄\27[49m    \27[m
    \27[49m    \27[38;2;66;38;38;49m▄\27[38;2;91;55;58;49m▄\27[38;2;62;44;44;48;2;140;85;89m▄\27[38;2;143;88;90;48;2;246;152;157m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;246;151;156m▄\27[38;2;245;150;155;48;2;244;138;143m▄\27[38;2;245;144;149;48;2;243;123;129m▄\27[38;2;244;143;148;48;2;243;123;129m▄\27[38;2;245;149;154;48;2;237;130;136m▄\27[38;2;245;145;151;48;2;233;119;126m▄\27[38;2;193;113;117;48;2;224;113;118m▄\27[38;2;245;149;154;48;2;244;136;142m▄\27[38;2;246;152;157;48;2;246;151;156m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;242;150;155;48;2;142;92;95m▄\27[38;2;147;96;98;48;2;56;54;54m▄\27[38;2;57;55;55;48;2;57;54;54m▄\27[38;2;57;55;55;48;2;65;57;58m▄\27[38;2;133;88;89;48;2;72;61;62m▄\27[38;2;234;142;147;48;2;66;57;58m▄\27[38;2;244;138;144;48;2;210;130;134m▄\27[38;2;244;142;147;48;2;245;148;153m▄\27[38;2;246;150;155;48;2;245;146;151m▄\27[38;2;246;152;157;48;2;245;150;155m▄\27[38;2;178;108;113;48;2;246;152;157m▄\27[38;2;98;59;59;48;2;237;147;152m▄\27[49;38;2;113;68;70m▀\27[49m   \27[38;2;87;51;58;49m▄\27[38;2;222;136;141;49m▄\27[38;2;246;152;157;48;2;204;126;130m▄\27[38;2;135;81;86;48;2;244;151;156m▄\27[49;38;2;137;80;84m▀\27[49m     \27[m
    \27[49m  \27[38;2;170;84;88;49m▄\27[38;2;243;121;128;48;2;190;108;112m▄\27[38;2;244;138;143;48;2;243;148;154m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;246;152;157;48;2;242;150;155m▄\27[38;2;246;152;157;48;2;219;135;139m▄\27[38;2;229;134;138;48;2;170;104;109m▄\27[38;2;222;119;124;48;2;246;150;155m▄\27[38;2;175;97;102;48;2;246;151;156m▄\27[38;2;233;141;146;48;2;246;151;156m▄\27[38;2;226;139;144;48;2;246;151;156m▄\27[38;2;171;105;108;48;2;246;152;157m▄\27[38;2;216;133;138;48;2;235;145;149m▄\27[38;2;246;151;156;48;2;232;143;148m▄\27[38;2;243;136;142;48;2;245;150;155m▄\27[38;2;243;119;126;48;2;244;141;147m▄\27[38;2;243;119;126;48;2;244;140;146m▄\27[38;2;243;134;139;48;2;246;150;155m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;246;152;157;48;2;240;148;153m▄\27[38;2;246;152;157;48;2;242;149;154m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;244;140;146;48;2;244;138;144m▄\27[38;2;243;123;130;48;2;243;121;127m▄\27[38;2;243;124;130;48;2;243;121;128m▄\27[38;2;234;136;141;48;2;233;135;140m▄\27[38;2;221;136;141;48;2;133;80;83m▄\27[38;2;173;106;109;49m▄\27[38;2;137;72;77;49m▄\27[38;2;210;103;107;49m▄\27[38;2;207;102;107;49m▄\27[38;2;239;124;130;48;2;69;41;41m▄\27[38;2;246;149;154;48;2;209;129;133m▄\27[38;2;246;152;157;48;2;240;149;154m▄\27[48;2;246;152;157m \27[38;2;118;74;78;48;2;214;132;137m▄\27[49m       \27[m
    \27[49m \27[38;2;174;94;98;48;2;128;66;66m▄\27[38;2;243;125;132;48;2;239;118;124m▄\27[38;2;243;129;135;48;2;243;119;126m▄\27[38;2;245;148;153;48;2;244;138;143m▄\27[48;2;246;152;157m  \27[48;2;246;150;155m \27[38;2;244;134;140;48;2;244;130;136m▄\27[38;2;243;120;126;48;2;243;119;126m▄\27[38;2;243;121;127;48;2;241;119;125m▄\27[38;2;244;139;145;48;2;239;134;140m▄\27[38;2;246;151;156;48;2;241;148;153m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[48;2;246;152;157m \27[38;2;246;151;156;48;2;246;150;155m▄\27[38;2;245;144;149;48;2;243;132;138m▄\27[38;2;243;131;137;48;2;243;119;125m▄\27[38;2;243;134;140;48;2;243;118;125m▄\27[38;2;245;148;154;48;2;243;133;139m▄\27[48;2;246;152;157m \27[38;2;245;149;154;48;2;246;151;156m▄\27[38;2;243;127;133;48;2;245;146;151m▄\27[38;2;243;121;128;48;2;244;143;148m▄\27[38;2;243;132;138;48;2;245;149;155m▄\27[38;2;245;151;156;48;2;245;149;154m▄\27[38;2;246;151;156;48;2;244;141;146m▄\27[38;2;246;151;156;48;2;245;142;147m▄\27[38;2;246;152;157;48;2;245;150;155m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;246;150;155m▄\27[38;2;245;148;153;48;2;243;132;138m▄\27[38;2;244;138;143;48;2;243;118;124m▄\27[38;2;244;138;144;48;2;243;118;124m▄\27[38;2;245;147;152;48;2;243;128;134m▄\27[38;2;241;149;154;48;2;246;150;155m▄\27[38;2;187;116;119;48;2;245;151;156m▄\27[49;38;2;170;104;107m▀\27[49m        \27[m
    \27[49m \27[38;2;184;114;117;48;2;187;114;117m▄\27[38;2;246;152;157;48;2;245;145;150m▄\27[38;2;209;129;133;48;2;245;148;153m▄\27[38;2;59;39;39;48;2;217;134;138m▄\27[49;38;2;192;119;123m▀\27[49;38;2;185;114;118m▀\27[38;2;82;46;46;48;2;243;150;155m▄\27[38;2;195;121;124;48;2;245;148;154m▄\27[38;2;227;141;145;48;2;245;141;147m▄\27[38;2;246;152;157;48;2;245;143;148m▄\27[38;2;246;152;157;48;2;245;150;155m▄\27[48;2;246;152;157m  \27[38;2;206;127;131;48;2;213;131;136m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;246;151;156m▄\27[38;2;245;149;154;48;2;246;150;155m▄\27[38;2;244;141;147;48;2;246;150;156m▄\27[38;2;238;141;146;48;2;246;152;157m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[38;2;245;150;155;48;2;244;147;152m▄\27[38;2;244;134;140;48;2;243;123;129m▄\27[38;2;243;128;134;48;2;243;119;125m▄\27[38;2;244;141;147;48;2;243;126;132m▄\27[38;2;246;151;156;48;2;245;150;155m▄\27[48;2;246;152;157m  \27[38;2;246;152;157;48;2;243;150;155m▄\27[38;2;245;152;157;48;2;196;121;125m▄\27[38;2;201;123;127;48;2;213;131;134m▄\27[38;2;139;80;84;48;2;219;135;140m▄\27[49;38;2;221;136;141m▀\27[49;38;2;209;128;133m▀\27[49;38;2;150;91;95m▀\27[49;38;2;91;55;61m▀\27[49m          \27[m
    \27[49m \27[49;38;2;153;95;99m▀\27[49;38;2;201;124;128m▀\27[49;38;2;73;42;42m▀\27[49m     \27[49;38;2;67;40;40m▀\27[49;38;2;182;111;116m▀\27[38;2;73;36;36;48;2;206;127;131m▄\27[38;2;156;85;89;48;2;204;126;129m▄\27[38;2;236;144;149;48;2;201;124;127m▄\27[38;2;246;152;157;48;2;232;143;148m▄\27[48;2;246;152;157m \27[38;2;246;150;155;48;2;246;150;156m▄\27[38;2;243;130;136;48;2;244;135;140m▄\27[38;2;230;114;119;48;2;242;120;126m▄\27[38;2;234;122;127;48;2;182;94;99m▄\27[38;2;242;148;153;48;2;246;149;154m▄\27[38;2;246;152;157;48;2;246;151;156m▄\27[38;2;246;152;157;48;2;246;150;155m▄\27[38;2;246;152;157;48;2;246;149;154m▄\27[38;2;246;152;157;48;2;246;151;156m▄\27[38;2;245;151;156;48;2;246;152;157m▄\27[38;2;246;151;156;48;2;246;152;157m▄\27[38;2;246;151;156;48;2;228;141;145m▄\27[38;2;213;131;135;48;2;232;143;148m▄\27[38;2;225;139;143;48;2;246;152;157m▄\27[38;2;245;144;150;48;2;245;145;150m▄\27[38;2;243;123;129;48;2;235;122;129m▄\27[38;2;243;119;125;48;2;153;75;80m▄\27[38;2;202;104;109;49m▄\27[38;2;172;103;107;49m▄\27[38;2;55;18;18;49m▄\27[49m          \27[m
    \27[49m     \27[38;2;128;78;78;49m▄\27[38;2;112;70;72;49m▄\27[38;2;214;132;137;49m▄\27[38;2;245;151;156;48;2;110;70;70m▄\27[38;2;246;150;155;48;2;176;107;110m▄\27[38;2;244;131;137;48;2;170;88;92m▄\27[38;2;243;123;130;48;2;235;116;122m▄\27[38;2;243;133;138;48;2;243;124;131m▄\27[38;2;239;146;151;48;2;245;147;153m▄\27[38;2;224;138;143;48;2;246;152;157m▄\27[38;2;124;76;78;48;2;246;152;157m▄\27[38;2;55;27;27;48;2;233;142;147m▄\27[38;2;163;81;85;48;2;212;121;125m▄\27[38;2;243;120;127;48;2;164;85;89m▄\27[38;2;244;135;141;48;2;245;142;147m▄\27[38;2;237;145;150;48;2;233;143;148m▄\27[38;2;245;150;155;48;2;246;151;156m▄\27[38;2;243;139;144;48;2;246;151;156m▄\27[38;2;243;133;138;48;2;245;151;156m▄\27[38;2;244;147;152;48;2;246;151;156m▄\27[38;2;208;128;132;48;2;229;142;146m▄\27[38;2;244;139;145;48;2;245;147;152m▄\27[38;2;243;121;127;48;2;243;134;140m▄\27[38;2;243;120;127;48;2;244;138;143m▄\27[38;2;244;140;146;48;2;232;141;146m▄\27[38;2;239;147;152;48;2;205;125;129m▄\27[38;2;196;120;125;48;2;244;139;145m▄\27[38;2;246;151;156;48;2;243;130;136m▄\27[38;2;246;152;157;48;2;244;140;145m▄\27[38;2;246;152;157;48;2;245;150;155m▄\27[38;2;245;151;156;48;2;228;141;145m▄\27[38;2;242;148;153;48;2;208;129;132m▄\27[38;2;234;125;130;48;2;200;120;126m▄\27[38;2;235;117;123;48;2;213;126;130m▄\27[38;2;243;133;138;48;2;216;132;136m▄\27[38;2;245;150;155;48;2;196;120;124m▄\27[38;2;246;152;157;48;2;154;93;97m▄\27[38;2;169;104;109;49m▄\27[49m   \27[m
    \27[49m   \27[38;2;157;86;90;49m▄\27[38;2;243;119;125;48;2;136;72;75m▄\27[38;2;243;118;125;48;2;243;131;137m▄\27[38;2;244;138;144;48;2;245;148;153m▄\27[48;2;246;152;157m   \27[38;2;181;112;115;48;2;246;149;154m▄\27[38;2;89;55;55;48;2;242;145;150m▄\27[49;38;2;167;102;105m▀\27[49;38;2;76;47;47m▀\27[49m \27[38;2;183;109;114;49m▄\27[38;2;243;128;134;48;2;162;82;86m▄\27[38;2;243;120;127;48;2;243;118;125m▄\27[38;2;243;122;128;48;2;243;118;125m▄\27[38;2;244;139;145;48;2;243;130;136m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;237;142;147;48;2;153;90;94m▄\27[38;2;243;121;128;48;2;243;120;127m▄\27[48;2;243;119;125m \27[48;2;243;129;135m \27[38;2;70;39;39;48;2;100;56;62m▄\27[49;38;2;134;78;81m▀\27[49;38;2;238;121;128m▀\27[38;2;122;73;74;48;2;243;124;131m▄\27[38;2;238;146;151;48;2;245;142;148m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;234;145;150m▄\27[38;2;210;129;133;48;2;111;69;70m▄\27[49;38;2;117;71;74m▀\27[49;38;2;117;71;71m▀\27[49;38;2;100;58;58m▀\27[49;38;2;39;23;23m▀\27[49m \27[49;38;2;60;30;30m▀\27[49;38;2;90;47;55m▀\27[49;38;2;197;120;124m▀\27[38;2;129;80;82;48;2;245;151;156m▄\27[38;2;244;151;156;48;2;240;148;153m▄\27[38;2;83;45;51;48;2;72;40;40m▄\27[49m  \27[m
    \27[49m  \27[38;2;185;113;118;48;2;154;92;95m▄\27[38;2;245;148;153;48;2;244;138;144m▄\27[38;2;244;141;146;48;2;243;122;128m▄\27[38;2;245;144;150;48;2;243;121;127m▄\27[38;2;246;151;156;48;2;245;145;151m▄\27[38;2;231;142;147;48;2;246;152;157m▄\27[38;2;119;71;71;48;2;246;152;157m▄\27[49;38;2;130;79;81m▀\27[49m  \27[38;2;70;35;35;49m▄\27[38;2;216;132;136;48;2;57;28;28m▄\27[38;2;246;152;157;48;2;208;128;132m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;246;151;156;48;2;245;144;149m▄\27[38;2;246;151;156;48;2;243;135;140m▄\27[38;2;220;135;140;48;2;244;139;145m▄\27[38;2;121;70;77;48;2;245;150;155m▄\27[49;38;2;183;113;117m▀\27[38;2;119;68;68;48;2;92;51;61m▄\27[38;2;246;151;156;48;2;244;143;148m▄\27[38;2;246;151;156;48;2;244;137;142m▄\27[38;2;242;149;154;48;2;245;147;152m▄\27[49;38;2;51;26;38m▀\27[49m    \27[49;38;2;181;110;115m▀\27[38;2;180;111;115;48;2;246;152;157m▄\27[38;2;246;152;157;48;2;245;151;156m▄\27[38;2;227;141;145;48;2;187;114;119m▄\27[38;2;48;16;16;49m▄\27[49m       \27[49;38;2;99;61;61m▀\27[49m   \27[m
    \27[49m  \27[38;2;150;91;96;48;2;190;118;121m▄\27[38;2;244;151;156;48;2;246;151;156m▄\27[38;2;235;145;150;48;2;246;151;156m▄\27[38;2;160;98;101;48;2;246;151;156m▄\27[49;38;2;204;126;130m▀\27[49;38;2;97;61;61m▀\27[49m   \27[38;2;206;105;109;48;2;64;32;32m▄\27[38;2;243;122;128;48;2;214;106;112m▄\27[38;2;244;141;147;48;2;244;140;145m▄\27[38;2;234;144;149;48;2;246;152;157m▄\27[38;2;159;98;102;48;2;246;152;157m▄\27[38;2;99;57;57;48;2;218;134;138m▄\27[49;38;2;145;87;92m▀\27[49m  \27[38;2;144;88;90;49m▄\27[38;2;246;152;157;48;2;143;88;91m▄\27[48;2;246;152;157m  \27[38;2;124;73;80;48;2;123;74;78m▄\27[49m      \27[38;2;137;85;88;48;2;172;106;109m▄\27[48;2;246;152;157m \27[38;2;246;152;157;48;2;245;152;157m▄\27[38;2;187;114;120;48;2;123;75;77m▄\27[49m           \27[m
    \27[49m   \27[49;38;2;105;60;60m▀\27[49;38;2;82;51;51m▀\27[49m     \27[38;2;230;142;147;48;2;174;105;109m▄\27[38;2;246;151;156;48;2;244;139;144m▄\27[38;2;200;123;126;48;2;245;141;147m▄\27[38;2;100;55;55;48;2;202;123;128m▄\27[49;38;2;122;72;78m▀\27[49m  \27[38;2;121;73;78;49m▄\27[38;2;229;141;146;48;2;95;58;58m▄\27[38;2;245;151;156;48;2;201;123;128m▄\27[38;2;224;138;142;48;2;246;152;157m▄\27[38;2;186;114;118;48;2;246;152;157m▄\27[38;2;131;80;84;48;2;246;152;157m▄\27[49;38;2;144;88;92m▀\27[49m      \27[38;2;105;63;66;49m▄\27[38;2;241;149;154;48;2;184;113;116m▄\27[48;2;246;152;157m \27[38;2;211;130;135;48;2;246;152;157m▄\27[38;2;73;36;36;48;2;139;86;88m▄\27[49m           \27[m
    \27[49m         \27[49;38;2;38;26;26m▀\27[49;38;2;207;128;132m▀\27[49;38;2;187;114;118m▀\27[49;38;2;102;61;61m▀\27[49m    \27[49;38;2;89;51;51m▀\27[49;38;2;169;102;107m▀\27[49;38;2;119;72;76m▀\27[49;38;2;40;13;27m▀\27[49m         \27[49;38;2;177;109;113m▀\27[38;2;35;12;23;48;2;220;136;141m▄\27[49;38;2;179;110;114m▀\27[49;38;2;67;44;44m▀\27[49m            \27[m
    ]]

      -- Convert visible escapes to real ESC bytes
      local function to_ansi(str)
        return str:gsub("\\27", "\27"):gsub("\\e", "\27")
      end

      -- Strip ANSI (from RAW with backslash escapes) to measure width/height
      local function strip_ansi(str)
        return str:gsub("\\27%[[0-9;]*m", ""):gsub("\\e%[[0-9;]*m", "")
      end

      local splash = { win = nil, buf = nil }
      local aug = vim.api.nvim_create_augroup("AlphaSplash", { clear = true })

      local function render_splash(alpha_win, alpha_buf)
        -- Cleanup old float
        if splash.win and vim.api.nvim_win_is_valid(splash.win) then
          pcall(vim.api.nvim_win_close, splash.win, true)
        end
        if splash.buf and vim.api.nvim_buf_is_valid(splash.buf) then
          pcall(vim.api.nvim_buf_delete, splash.buf, { force = true })
        end

        local win_w = vim.api.nvim_win_get_width(alpha_win)
        local win_h = vim.api.nvim_win_get_height(alpha_win)

        local visible = strip_ansi(RAW)
        local lines = vim.split(visible, "\n", { plain = true })
        if lines[#lines] == "" then 
          table.remove(lines, #lines) 
        end
        local height = #lines
        local width = 0
        for _, l in ipairs(lines) do
          width = math.max(width, vim.fn.strdisplaywidth(l))
        end
        width = math.min(width, win_w)

        -- Position art at the top where header would be
        local col = math.max(0, math.floor((win_w - width) / 2))
        local row = 2  -- Small offset from top

        splash.buf = vim.api.nvim_create_buf(false, true)
        vim.bo[splash.buf].buftype = "nofile"
        vim.bo[splash.buf].bufhidden = "wipe"

        splash.win = vim.api.nvim_open_win(splash.buf, false, {
          relative = "win",
          win = alpha_win,
          row = row,
          col = col,
          width = width,
          height = height,
          focusable = false,
          style = "minimal",
          border = "none",
          zindex = 5, -- Lower than alpha content but visible
          noautocmd = true,
        })

        -- Make background transparent
        vim.api.nvim_set_hl(0, "AlphaSplashTransparent", { bg = "NONE", ctermbg = "NONE" })
        vim.wo[splash.win].winhl = "Normal:AlphaSplashTransparent,NormalNC:AlphaSplashTransparent,EndOfBuffer:AlphaSplashTransparent"

        -- Keep the float clean
        local w = splash.win
        vim.wo[w].winblend = 0
        vim.wo[w].signcolumn = "no"
        vim.wo[w].foldcolumn = "0"
        vim.wo[w].cursorline = false
        vim.wo[w].list = false
        vim.wo[w].colorcolumn = ""

        -- Render ANSI
        local chan = vim.api.nvim_open_term(splash.buf, {})
        vim.api.nvim_chan_send(chan, to_ansi(RAW) .. "\r\n")
      end

      -- Setup ANSI art rendering when alpha is ready
      vim.api.nvim_create_autocmd("User", {
        group = aug,
        pattern = "AlphaReady",
        callback = function(ev)
          vim.o.termguicolors = true
          local alpha_win = vim.api.nvim_get_current_win()
          render_splash(alpha_win, ev.buf)

          vim.api.nvim_create_autocmd({ "WinResized", "VimResized" }, {
            group = aug,
            callback = function()
              if vim.api.nvim_buf_is_valid(ev.buf) and vim.api.nvim_win_is_valid(alpha_win) then
                render_splash(alpha_win, ev.buf)
              end
            end,
          })

          vim.api.nvim_create_autocmd("BufWipeout", {
            group = aug,
            buffer = ev.buf,
            once = true,
            callback = function()
              if splash.win and vim.api.nvim_win_is_valid(splash.win) then
                pcall(vim.api.nvim_win_close, splash.win, true)
              end
              if splash.buf and vim.api.nvim_buf_is_valid(splash.buf) then
                pcall(vim.api.nvim_buf_delete, splash.buf, { force = true })
              end
            end,
          })
        end,
      })

      -- Close Lazy and re-open when the dashboard is ready
      if vim.o.filetype == "lazy" then
        vim.cmd.close()
        vim.api.nvim_create_autocmd("User", {
          once = true,
          pattern = "AlphaReady",
          callback = function()
            require("lazy").show()
          end,
        })
      end

      require("alpha").setup(dashboard.opts)

      vim.api.nvim_create_autocmd("User", {
        once = true,
        pattern = "LazyVimStarted",
        callback = function()
          local stats = require("lazy").stats()
          local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
          dashboard.section.footer.val = "⚡ Neovim loaded "
            .. stats.loaded
            .. "/"
            .. stats.count
            .. " plugins in "
            .. ms
            .. "ms"
          pcall(vim.cmd.AlphaRedraw)
        end,
      })
    end,
  },
}